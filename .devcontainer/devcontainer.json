{
    "name": "DevPod DevOps (Neovim btw)",
    "image": "mcr.microsoft.com/devcontainers/base:ubuntu",
    "features": {
        "ghcr.io/devcontainers/features/kubectl-helm-minikube:1": {},
        "ghcr.io/kreemer/features/stow:1": {},
        "ghcr.io/devcontainers/features/terraform:1": {},
        "ghcr.io/devcontainers-extra/features/ansible:2": {},
        "ghcr.io/duduribeiro/devcontainer-features/neovim:1": {},
        "ghcr.io/devcontainers/features/go:1": {},
        "ghcr.io/devcontainers/features/rust:1": {}
    },
    "forwardPorts": [22],
    "portsAttributes": {
        "22": {
            "label": "SSH",
            "requireLocalPort": true
    },
    "postCreateCommand": [
        "zsh", "-c",
        "echo 'Setting up DevOps container with dotfiles...' && echo 'Cloning dotfiles repository...' && git clone https://github.com/ReCoL1337/.dotfiles.git ~/.dotfiles && cd ~/.dotfiles && echo 'Setting up dotfiles...' && stow --adopt -v . && echo 'Dotfiles setup complete!' && echo 'Setting up SSH daemon...' && sudo rc-update add sshd && echo 'Verifying tools...' && go version && cargo --version && terraform --version && helm version --client && nvim --version && echo 'Container ready'"
    ],
    "remoteUser": "recol",
    "runArgs": [
        "--init",
        "--cap-add=SYS_PTRACE",
        "--security-opt", "seccomp=unconfined"
    ],
    "shutdownAction": "stopContainer",
    "containerEnv": {
        "SHELL": "/bin/zsh",
        "TERM": "xterm-256color",
        "EDITOR": "nvim",
        "VISUAL": "nvim"
    }
    }
}
